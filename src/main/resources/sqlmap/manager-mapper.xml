<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="manager.mapper">

	<!-- FAQ 글 삭제 -->
	<delete id="faq_delete">
		delete from tbl_faq
		where faq_code = #{faq_code}
	</delete>

	<!-- FAQ 글 수정 -->
	<update id="faq_update">
		update tbl_faq set faq_title=#{faq_title}, faq_content=#{faq_content}, 
				faq_regist_date = default
		where faq_code = #{faq_code}
	</update>

	<!-- FAQ 상세 정보 조회 -->
	<select id="faq_detail" resultType="manager.FaqVO">
		select * from tbl_faq
		where faq_code = #{faq_code}
	</select>


	<!-- FAQ 신규 글 저장 -->
	<insert id="faq_insert">
		insert into tbl_faq
		values (seq_faq_code.nextVal, #{faq_title}, #{faq_content}, default)
	</insert>

	<!-- FAQ 목록 조회 -->
	<select id="faq_list" resultType="manager.FaqVO">
		select * from tbl_faq
		order by faq_code desc
	</select>

	<!-- 이용약관 삭제 -->
	<delete id="provision_delete">
		delete from tbl_provision
		where provision_code = #{provision_code}
	</delete>
	
	<!-- 이용약관 내용 수정 -->
	<update id="provision_update">
		update tbl_provision set provision_nm = #{provision_nm}, provision_content=#{provision_content}
		where provision_code = #{provision_code}
	</update>
	
	<!-- 이용약관 상세화면 -->
	<select id="provision_detail" resultType="manager.ProvisionVO">
		select * from tbl_provision
		where provision_code = #{provision_code}
	</select>
	
	<!-- 이용약관 조회 -->
	<select id="provision_list" resultType="manager.ProvisionVO">
		select * from tbl_provision
	</select>
	
	<!-- 이용약관 삽입 -->
	<insert id="provision_insert">
		insert into tbl_provision (provision_code, provision_nm, provision_content, provision_required)
		values (seq_provision_code.nextval, #{provision_nm}, #{provision_content}, default )
	</insert>
	
	<!-- 회원목록 조회 -->
	<select id="member_list" resultType="member.MemberVO">
		select user_member.*, (select product_used from tbl_product where tbl_product.id = user_member.id) booking
		from user_member
	</select>
	
</mapper>